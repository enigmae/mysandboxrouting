(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{213:function(e,t,n){e.exports=n(501)},227:function(e,t){},229:function(e,t){},241:function(e,t,n){},291:function(e,t){},292:function(e,t){},353:function(e,t){},501:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n(124),r=n(9),s=n(11),o=n(21),c=n(20),u=n(22),l=n(4),h=n(24),d=n.n(h),m=n(44),f=n(208);n(241);function v(){return(v=Object(m.a)(d.a.mark(function e(t){var n,a;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("running search"),n=new f.RestClient("rest-samples","https://dev.virtualearth.net"),e.next=4,n.get("/REST/v1/Locations?q="+t+"&key=ArLJodQ7fEaQ2dfy3lIHWJrJILC35_Qj0EpT8TCy3ls96pl6sqCdlu18bo8j_tbM");case 4:return a=e.sent,e.abrupt("return",a.result.resourceSets[0].resources[0]);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}var y=function e(t,n,a,i,s){Object(r.a)(this,e),this.SearchResult=t,this.Riders=n,this.Coords=a,this.StartTime=i,this.EndTime=s},S=function(e){function t(e){var n;Object(r.a)(this,t),(n=Object(o.a)(this,Object(c.a)(t).call(this,e))).inputElement=void 0,n.handleKeyDown=function(e){"Enter"===e.key&&(e.preventDefault(),e.stopPropagation(),n.inputElement.blur()),""===n.state.SearchQuery&&n.setState({SearchResultVisible:!1})},n.handleSearchChanged=n.handleSearchChanged.bind(Object(l.a)(Object(l.a)(n))),n.handleSearchBlur=n.handleSearchBlur.bind(Object(l.a)(Object(l.a)(n))),n.handleKeyDown=n.handleKeyDown.bind(Object(l.a)(Object(l.a)(n)));var a="",i={Lat:0,Long:0};return e.SearchResult&&(e.SearchResult.SearchResult&&(a=e.SearchResult.SearchResult),e.SearchResult.Coords&&(i=e.SearchResult.Coords)),n.state={SearchResultVisible:!1,SearchQuery:e.SearchResult?e.SearchResult.SearchQuery:"",SearchResult:a,Coords:i},n.inputElement=null,n}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.inputElement.focus()}},{key:"handleSearchChanged",value:function(e){var t=this;this.setState({LastQuery:this.state.SearchQuery}),console.log("handlesearch changed last query is "+this.state.LastQuery),this.setState({SearchQuery:e.target.value,SearchResultVisible:!0}),function(e){return v.apply(this,arguments)}(e.target.value).then(function(e){console.log("last query is "+t.state.LastQuery),console.log("maps Response: "+JSON.stringify(e)),void 0!==e&&t.setState({SearchResult:e.name,Coords:{Lat:e.point.coordinates[0],Long:e.point.coordinates[1]}})})}},{key:"noticedChange",value:function(){return console.log("last query is "+this.state.LastQuery),console.log("search query is "+this.state.SearchQuery),console.log("search result is "+this.state.SearchResult),this.state.LastQuery!==this.state.SearchQuery?(this.setState({LastQuery:this.state.SearchQuery}),console.log("noticed change to "+this.state.LastQuery),!0):(console.log("noticed no change"),!1)}},{key:"handleSearchBlur",value:function(e){if(this.noticedChange()){var t=""===this.state.SearchQuery?"":this.state.SearchResult;this.setState({SearchQuery:t,SearchResultVisible:!1}),this.setState({LastQuery:t}),""!==t&&(this.setState({Submitted:!0}),this.props.searchResultsChanged({SearchResult:t,Coords:this.state.Coords,SearchQuery:this.state.SearchQuery}))}}},{key:"render",value:function(){var e,t=this;return this.state.SearchResultVisible&&(e=a.createElement("div",null,a.createElement("input",{type:"text",value:this.state.SearchResult,readOnly:!0}),a.createElement("br",null))),a.createElement("span",null,a.createElement("input",{type:"text",value:this.state.SearchQuery,onChange:this.handleSearchChanged,onBlur:this.handleSearchBlur,onKeyDown:this.handleKeyDown,readOnly:this.state.Submitted,ref:function(e){return t.inputElement=e}}),e)}}]),t}(a.Component),b=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(o.a)(this,Object(c.a)(t).call(this,e))).handleRidersChanged=n.handleRidersChanged.bind(Object(l.a)(Object(l.a)(n))),n.handleAddLocationClicked=n.handleAddLocationClicked.bind(Object(l.a)(Object(l.a)(n))),n.handleSearchResultChanged=n.handleSearchResultChanged.bind(Object(l.a)(Object(l.a)(n))),n.state={NumRiders:e.NumRiders,SearchResult:e.SearchResult,SubmitEnabled:!1,Submitted:!1},n}return Object(u.a)(t,e),Object(s.a)(t,[{key:"handleRidersChanged",value:function(e){this.setState({NumRiders:e.target.value},this.resetSubmitEnabled)}},{key:"handleSearchResultChanged",value:function(e){console.log("handleSearchResultsChanged "),this.setState({SearchResult:e.SearchResult,Coords:e.Coords},this.resetSubmitEnabled)}},{key:"handleAddLocationClicked",value:function(){this.props.submitLocationRider(this.state)}},{key:"resetSubmitEnabled",value:function(){this.state.NumRiders&&this.state.SearchResult&&this.setState({SubmitEnabled:!0})}},{key:"render",value:function(){return a.createElement("table",null,a.createElement("td",null),a.createElement("td",null),a.createElement("tr",null,a.createElement(S,{SearchResult:{SearchQuery:"",SearchResult:this.state.SearchResult},searchResultsChanged:this.handleSearchResultChanged}),a.createElement("div",{style:{display:"inline-block"}},a.createElement("label",{className:"RidersLabel"},"# Riders"),a.createElement("input",{className:"Riders",value:this.state.NumRiders,onChange:this.handleRidersChanged}),a.createElement("button",{className:"AddLocation",onClick:this.handleAddLocationClicked,disabled:!this.state.SubmitEnabled},"Add location"))))}}]),t}(a.Component),p=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(o.a)(this,Object(c.a)(t).call(this,e))).state={LocationRiders:new Array},n.handleLocationRiderChanged=n.handleLocationRiderChanged.bind(Object(l.a)(Object(l.a)(n))),n.handleSubmitRider=n.handleSubmitRider.bind(Object(l.a)(Object(l.a)(n))),n}return Object(u.a)(t,e),Object(s.a)(t,[{key:"handleLocationRiderChanged",value:function(e){}},{key:"handleSubmitRider",value:function(e){var t=this,n=this.state.LocationRiders;n.push(e),this.setState({LocationRiders:n},function(){return t.props.handleLocationRidersChanged(t.state.LocationRiders)})}},{key:"render",value:function(){var e=this,t=[a.createElement(b,{submitLocationRider:function(t){return e.handleSubmitRider(t)},handleLocationRiderChanged:this.handleLocationRiderChanged})],n=!0,i=!1,r=void 0;try{for(var s,o=this.state.LocationRiders[Symbol.iterator]();!(n=(s=o.next()).done);n=!0){var c=s.value;t.push(a.createElement(b,{NumRiders:c.NumRiders,SearchResult:c.SearchResult,submitLocationRider:function(t){return e.handleSubmitRider(t)}}))}}catch(u){i=!0,r=u}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}return a.createElement("ol",null,t)}}]),t}(a.Component),g=n(212),R=n(30),j=n.n(R),T=function(e){function t(){return Object(r.a)(this,t),Object(o.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(s.a)(t,[{key:"formatDate",value:function(e){return e?new Date(this.fixPM(e)).toLocaleDateString():""}},{key:"formatTime",value:function(e){return e?new Date(this.fixPM(e)).toLocaleTimeString():""}},{key:"fixPM",value:function(e){return e.includes("P")?e.replace("P"," ")+" PM":e}},{key:"render",value:function(){var e=this,t=R.from(this.props.condensedInstructions.condensedInstructions).toArray().map(function(t){var n,i,r,s,o,c;return i=a.createElement("td",null,t.agent),r=a.createElement("td",null,t.location),s=a.createElement("td",null,e.formatDate(t.startTime),"\xa0",e.formatTime(t.startTime)),o=a.createElement("td",null,t.endTime?e.formatDate(t.endTime):"","\xa0",t.endTime?e.formatTime(t.endTime):""),n=a.createElement("td",null,t.passengers),c=a.createElement("td",null,t.miles.toFixed(2)),a.createElement("tr",null,i,r,s,o,n,c)});return a.createElement("table",null,a.createElement("tr",null,a.createElement("th",null,"Agent"),a.createElement("th",null,"Location"),a.createElement("th",null,"Arrive"),a.createElement("th",null,"Leave"),a.createElement("th",null,"# Riders"),a.createElement("th",null,"Miles")),t)}}]),t}(a.Component),C=n(209),E=n.n(C),O=function(e){function t(e){var n;Object(r.a)(this,t);return(n=Object(o.a)(this,Object(c.a)(t).call(this,e))).state=Object(g.a)({},{collapsed:!0},n.calculateState(),{startingPoint:""}),n}return Object(u.a)(t,e),Object(s.a)(t,[{key:"calculateState",value:function(){return{totalHours:Math.floor(this.props.condensedInstructionSet.durationMinutes/60),totalMinutes:this.props.condensedInstructionSet.durationMinutes%60,totalDistance:this.props.condensedInstructionSet.totalMiles}}},{key:"componentDidUpdate",value:function(){var e=this.calculateState();this.state.totalDistance==e.totalDistance&&this.state.totalHours==e.totalHours&&this.state.totalMinutes==e.totalMinutes||this.setState(e)}},{key:"render",value:function(){var e="";if(this.props.condensedInstructionSet.missedCities&&this.props.condensedInstructionSet.missedCities.length>0){e=" Cities Missed:[";var t=!0,n=!1,i=void 0;try{for(var r,s=this.props.condensedInstructionSet.missedCities[Symbol.iterator]();!(t=(r=s.next()).done);t=!0){e+=r.value+", "}}catch(c){n=!0,i=c}finally{try{t||null==s.return||s.return()}finally{if(n)throw i}}e.substr(0,e.length-2),e+="]"}var o="Total Time:".concat(this.state.totalHours," hrs ").concat(this.state.totalMinutes.toFixed()," min Total Distance:").concat(this.props.condensedInstructionSet.totalMiles.toFixed(1)," mi #Buses:").concat(this.props.condensedInstructionSet.numAgents).concat(e);return a.createElement(E.a,{trigger:o},a.createElement(T,{condensedInstructions:this.props.condensedInstructionSet}))}}]),t}(a.Component),w=n(125),k=n(51),L=n.n(k),I=n(210),A=n(453),D=function e(t,n,a,i,s,o,c){Object(r.a)(this,e),this.name=t,this.dwellTime=n,this.location=a,this.quantity=i,this.openingTime=s,this.closingTime=o,this.startingTime=c},M=function e(t,n,a,i){Object(r.a)(this,e),this.condensedInstructions=t,this.endLocationName=n,this.durationMinutes=a,this.missedCities=i,this.totalMiles=0,this.numAgents=void 0;for(var s=new Set,o=0;o<t.length;o++)this.totalMiles+=t[o].miles,s.add(t[o].agent);this.numAgents=s.size},x=function(){function e(t,n){var a=this;Object(r.a)(this,e),this.endLocationName=n,this.agent=void 0,this.instructions=void 0,this.distance=void 0,this.durationMinutes=void 0,this.instructions=t.instructions,this.agent=t.agent,this.distance=this.calcdistance(),this.durationMinutes=this.calcMinutes(),this.instructions.map(function(e){return a.adjustTimeFormat(e)})}return Object(s.a)(e,[{key:"calcdistance",value:function(){for(var e=0,t=0;t<this.instructions.length;t++)this.instructions[t].distance&&(e+=this.instructions[t].distance);return 621371e-9*e}},{key:"adjustTimeFormat",value:function(e){e.startTime=e.startTime.replace("P","T").replace("A","T")}},{key:"calcMinutes",value:function(){return new A(new Date(this.instructions[this.instructions.length-1].startTime),new Date(this.instructions[2].startTime)).minutes()}},{key:"recalculateDuration",value:function(){var e=this;this.instructions.map(function(t){return e.adjustTimeFormat(t)}),this.durationMinutes=this.calcMinutes()}},{key:"startingPoint",get:function(){return this.instructions[2].itineraryItem.name}},{key:"condensedInstructions",get:function(){for(var e=new Array,t=0,n=!0,a=1;a<this.instructions.length-1;a++){var i=this.instructions[a];if("VisitLocation"==i.instructionType)e.push({agent:this.agent.name,startTime:i.startTime,endTime:i.endTime,location:i.itineraryItem?i.itineraryItem.name:"",miles:t,passengers:i.itineraryItem.quantity[0]});else{if(n){t=0,n=!1;continue}t+=621371e-9*i.distance}}var r=this.instructions[this.instructions.length-1];return e.push({agent:this.agent.name,startTime:r.startTime,location:this.endLocationName,miles:t,passengers:0}),e}}]),e}(),Q=function(){function e(t,n){Object(r.a)(this,e),this.resourceSets=t,this.destinationName=n,this.instructionSets=void 0,this.condensedInstructionSet=void 0,this.citiesVisited=void 0,this.citiesMissed=void 0,this.instructionSets=R.from(this.resourceSets[0].resources[0].agentItineraries).where(function(e){return e.instructions.length>3}).toArray().map(function(e){return new x(e,n)});var a=R.from(this.instructionSets),i=a.selectMany(function(e){return e.condensedInstructions}).orderBy(function(e){return e.startTime}).toArray();this.citiesVisited=a.selectMany(function(e){return e.condensedInstructions}).selectMany(function(e){return e.location}).distinct().toArray(),this.citiesMissed=R.from(this.resourceSets[0].resources[0].unscheduledItems).select(function(e){return e.name}).toArray(),this.condensedInstructionSet=new M(i,n,a.max(function(e){return e.durationMinutes}),this.citiesMissed)}return Object(s.a)(e,[{key:"add_minutes",value:function(e,t){return new Date(e.getTime()+6e4*t)}},{key:"readjustForArrival",value:function(e){var t=this;this.instructionSets.forEach(function(n){console.log("Readjusting for instruction set:"+JSON.stringify(n));var a=n.instructions[n.instructions.length-1],i=new Date(a.startTime);console.log("Readjusting for end time: "+i),console.log("dateDiff:"+A);var r=new A(e,i).minutes()+1;console.log("Got difference between '".concat(e,"' and ").concat(a.startTime," as ").concat(r)),n.instructions.forEach(function(e){console.log("Changing start time for instruction '".concat(e.startTime,"'"));var n=new Date(e.startTime);console.log("Changing start time for instruction date:'".concat(n,"'"));var a=t.add_minutes(n,r);console.log("Added '".concat(r,"' minutes to ").concat(n,":").concat(a)),e.startTime=L()(a,"yyyy-mm-ddThh:MM:ss"),e.endTime&&(n=new Date(e.endTime),a=t.add_minutes(n,r),e.endTime=L()(a,"yyyy-mm-ddThh:MM:ss")),console.log("Set startTime to ".concat(e.startTime))}),n.recalculateDuration()})}}]),e}(),N=function e(t,n){Object(r.a)(this,e),this.agents=t,this.itineraryItems=n},P=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ArLJodQ7fEaQ2dfy3lIHWJrJILC35_Qj0EpT8TCy3ls96pl6sqCdlu18bo8j_tbM";Object(r.a)(this,e),this.key=t,this.semaphore=new I.Semaphore(7)}return Object(s.a)(e,[{key:"getItinerary",value:function(){var e=Object(m.a)(d.a.mark(function e(t){var n,a,i,r,s,o,c,u,l,h,f,v;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(n=t.searchParams.map(function(e){return new D(e.SearchResult,"00:"+t.dwellTime+":00",{latitude:e.Coords.Lat,longitude:e.Coords.Long},[e.Riders])}),console.log("Searching for start time:"+t.startTime),a=void 0==t.startTime?"2019-11-16T08:00:00":L()(t.startTime,"yyyy-mm-ddThh:MM:ss"),i=void 0==t.endTime?"2019-11-16T18:00:00":L()(t.endTime,"yyyy-mm-ddThh:MM:ss"),a=a.replace("P","T").replace("A","T"),i=i.replace("P","T").replace("A","T"),r=new Array,s=t.numAgents,t.numAgents>3&&(s=3),o=0;o<s;o++)r.push({capacity:[t.busCapacity],name:"Agent_"+o,shifts:[{startTime:a,endTime:i,endLocation:{latitude:t.endLocation.Lat,longitude:t.endLocation.Long},startLocation:{latitude:t.startLocation.Lat,longitude:t.startLocation.Long}}]});return e.next=12,this.semaphore.acquire();case 12:return c=e.sent,e.next=15,w.post("https://dev.virtualearth.net/REST/V1/Routes/OptimizeItineraryAsync?key="+this.key,{resolveWithFullResponse:!1,json:new N(r,n)});case 15:if(u=e.sent,l=u,console.log(JSON.stringify(l)),h=l.resourceSets[0].resources[0].callbackUrl,f=l.resourceSets[0].resources[0].callbackInSeconds,!h){e.next=23;break}return v=new Promise(function(e,t){var n,a=function(){var t=Object(m.a)(d.a.mark(function t(){return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("invoking callback url"),t.next=3,w.get(h);case 3:u=t.sent,l=JSON.parse(u),h=l.resourceSets[0].resources[0].callbackUrl,console.log(JSON.stringify(l)),h?n=setTimeout(a,1e3*f):(clearTimeout(n),e(l));case 8:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}();n=setTimeout(a,1e3*f)}),e.abrupt("return",v.then(function(e){return new Q(JSON.parse(u).resourceSets,t.endLocationName)}).finally(function(){return c()}));case 23:return c(),e.abrupt("return",new Q(u.resourceSets,t.endLocationName));case 25:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}]),e}(),J=function(){function e(t){Object(r.a)(this,e),this.itinerary=t}return Object(s.a)(e,[{key:"getItineraries",value:function(){var e=Object(m.a)(d.a.mark(function e(t){var n,a,i,r,s,o,c,u,l,h,m,f,v,y,S,b,p;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=new Array,a=t.minBuses;case 2:if(!(a<=t.maxBuses)){e.next=25;break}for(i=!0,r=!1,s=void 0,e.prev=6,o=t.searchResults[Symbol.iterator]();!(i=(c=o.next()).done);i=!0)u=c.value,new Date(2019,11,17,10,0),new Date(2019,11,18,22,0),l=this.itinerary.getItinerary({numAgents:a,endLocationName:t.endLocationName,startLocation:u.Coords,searchParams:t.searchResults,dwellTime:t.dwellTime,endLocation:t.endLocation,startTime:u.StartTime,endTime:u.EndTime,busCapacity:t.busCapacity}),n.push(l);e.next=14;break;case 10:e.prev=10,e.t0=e.catch(6),r=!0,s=e.t0;case 14:e.prev=14,e.prev=15,i||null==o.return||o.return();case 17:if(e.prev=17,!r){e.next=20;break}throw s;case 20:return e.finish(17);case 21:return e.finish(14);case 22:a++,e.next=2;break;case 25:return h=new Array,e.next=28,Promise.all(n.map(function(e){return e.then(function(e){return h.push(e)})}));case 28:for(m=new Set,f=new Array,v=0,y=h;v<y.length;v++)S=y[v],b=S.condensedInstructionSet.durationMinutes+"_"+S.condensedInstructionSet.totalMiles+"_"+S.condensedInstructionSet.condensedInstructions.length,m.has(b)||(f.push(S),m.add(b));return p={itineraries:R.from(f).where(function(e){return void 0!==e.instructionSets}).orderByDescending(function(e){return e.instructionSets.length}).thenBy(function(e){return R.from(e.instructionSets).max(function(e){return e.durationMinutes})}).select(function(e){return e}).toArray()},e.abrupt("return",p);case 33:case"end":return e.stop()}},e,this,[[6,10,14,22],[15,,17,21]])}));return function(t){return e.apply(this,arguments)}}()}]),e}(),B=n(211),F=n.n(B),q=n(28),H=function(e){function t(e){var n;Object(r.a)(this,t),n=Object(o.a)(this,Object(c.a)(t).call(this,e));var a=q.b(new Date,"day"),i=q.a(a,20,"hours"),s=q.a(i,-1,"day");return n.state={Arrivaltime:q.a(s,1,"minutes")},n.handleArrivalTimeChanged=n.handleArrivalTimeChanged.bind(Object(l.a)(Object(l.a)(n))),n}return Object(u.a)(t,e),Object(s.a)(t,[{key:"handleArrivalTimeChanged",value:function(e){this.setState({Arrivaltime:e})}},{key:"render",value:function(){if(!this.props.ItinerariesResponse)return a.createElement("div",null);var e,t=this.props.ItinerariesResponse.itineraries.map(function(e){return a.createElement("li",null," ",a.createElement(O,{condensedInstructionSet:e.condensedInstructionSet}))});return e=a.createElement("ol",null,t),a.createElement("div",null,a.createElement("h1",null,"Itineraries:"),a.createElement("ol",null,e))}}]),t}(a.Component),_=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(o.a)(this,Object(c.a)(t).call(this,e))).itineraryCollection=void 0,n.itinerary=void 0,n.searchResultHashmap={},n.itinerary=new P,n.itineraryCollection=new J(n.itinerary),n.handleDestinationChanged=n.handleDestinationChanged.bind(Object(l.a)(Object(l.a)(n))),n.state={DwellTime:15,Arrivaltime:n.initializeArrivalTime()},n.handleDwellTimeChanged=n.handleDwellTimeChanged.bind(Object(l.a)(Object(l.a)(n))),n.handleMultipleItinerarySearch=n.handleMultipleItinerarySearch.bind(Object(l.a)(Object(l.a)(n))),n.handleSearchItineraries=n.handleSearchItineraries.bind(Object(l.a)(Object(l.a)(n))),n.handleReadjustForArrival=n.handleReadjustForArrival.bind(Object(l.a)(Object(l.a)(n))),n.handleArrivalTimeChanged=n.handleArrivalTimeChanged.bind(Object(l.a)(Object(l.a)(n))),n}return Object(u.a)(t,e),Object(s.a)(t,[{key:"initializeArrivalTime",value:function(){var e=q.b(new Date,"day"),t=q.a(e,20,"hours"),n=q.a(t,-1,"day");return q.a(n,1,"minutes")}},{key:"render",value:function(){var e=this;if(this.state&&this.state.ItinerariesResponse){var t=this.state.ItinerariesResponse.itineraries.map(function(e){return a.createElement("li",null,a.createElement(O,{condensedInstructionSet:e.condensedInstructionSet}))});a.createElement("ol",null,t)}return a.createElement("div",null,a.createElement("div",null,"Enter destination:",a.createElement("div",null,a.createElement(S,{SearchResult:{SearchQuery:"",SearchResult:void 0},searchResultsChanged:this.handleDestinationChanged}))),a.createElement("div",null,"Enter dwell time:",a.createElement("br",null),a.createElement("input",{value:this.state.DwellTime,onChange:this.handleDwellTimeChanged})),"Enter arrival time:",a.createElement("br",null),a.createElement(F.a,{value:this.state.Arrivaltime,onChange:this.handleArrivalTimeChanged}),a.createElement(p,{handleLocationRidersChanged:function(t){return e.handleLocationRidersChanged(t)}}),a.createElement("button",{onClick:function(){return e.handleSearchItineraries()}},"Search"),a.createElement(H,{ItinerariesResponse:this.state.ItinerariesResponse}))}},{key:"handleLocationRidersChanged",value:function(e){var t=j.a.from(e).select(function(e){return new y(e.SearchResult,e.NumRiders,e.Coords)}).toArray();this.setState({SearchResults:t})}},{key:"handleArrivalTimeChanged",value:function(e){this.setState({Arrivaltime:e})}},{key:"handleReadjustForArrival",value:function(e){var t=this.searchResultHashmap,n=!1;this.state.SearchResults.forEach(function(a){var i=t[a.SearchResult];i&&(n=!0);var r=i;r+=2;var s=q.a(e,-r,"minutes");a.StartTime=s,a.EndTime=q.a(s,1,"day")}),n&&this.handleSearchItineraries(!0)}},{key:"handleReadjustForArrivalBySubtractDuration",value:function(e){var t=this;console.log("Readjusting for arrival date:"+e.toString());var n=this.state.ItinerariesResponse;n.itineraries.forEach(function(t){t.readjustForArrival(e)}),this.setState({ItinerariesResponse:void 0},function(){return t.setState({ItinerariesResponse:n})})}},{key:"handleMultipleItinerarySearch",value:function(e){this.setState({SearchResults:e})}},{key:"handleSearchItineraries",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.itineraryCollection.getItineraries({dwellTime:this.state.DwellTime,searchResults:this.state.SearchResults,endLocation:this.state.Destination.Coords,endLocationName:this.state.Destination.SearchResult}).then(function(t){e.setState({ItinerariesResponse:t}),t.itineraries.forEach(function(t){t.instructionSets.forEach(function(t){e.searchResultHashmap[t.startingPoint]=t.durationMinutes})})}).then(function(){t||e.handleReadjustForArrivalBySubtractDuration(e.state.Arrivaltime)})}},{key:"handleDestinationChanged",value:function(e){console.log("handle destination changed:"+JSON.stringify(e)),this.setState({Destination:e})}},{key:"handleDwellTimeChanged",value:function(e){this.setState({DwellTime:e.target.value})}}]),t}(a.Component);var V=document.getElementById("root");Object(i.render)(a.createElement(function(){return a.createElement("div",{className:"App"},a.createElement("h1",null,"Hello CodeSandbox Test"),a.createElement("h2",null,"Enter locations"),a.createElement(_,null))},null),V)}},[[213,2,1]]]);
//# sourceMappingURL=main.9dd5d9f3.chunk.js.map